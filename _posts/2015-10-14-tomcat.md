---
layout: post
title: "Tomcat"
date: 2015-10-14 14:32:48
description: "Tomcat"
categories:
- Tomcat
permalink: tomcat
---

#### Tomcat相关端口
> 端口：8005 主要负责启动关闭  
        8008 主要负责通过AJP均衡，常用于Apache与Tomcat整合  
        8080 WEB访问，常用于Nginx与Tomcat整合

#### Tomcat实现多域名之间Session共享
问题：
启用二级域名后，面临一个主域名与二级域名之间Session不能共享的问题。
因为Tomcat下，JSESSIONID（Cookie）的path是默认没有限制的，访问不同的二级域名，Cookie就重新生成，那么Session也会不一样。
解决方案：
1.在项目的/MET-INF/目录下创建一个context.xml文件  

```vim
<Context ... sessionCookiePath="/">...</Content>
```  

2.Tomcat的server.xml文件  

```vim
<Context ... sessionCookiePath="/">...</Content>
```  

当然也可以配置域名、Http只读  

```vim
<Context ... useHttpOnly="true" sessionCookiePath="/" sessionCookieDomain=".XXXX.com">...</Content>
```
