---
layout: post
title: "分布式事务之TCC"
date: 2018-04-21 17:25:28
description: "分布式事务之TCC"
categories:
- 分布式事务
- TCC
permalink: tcc
---

##### 什么是TCC分布式事务

TCC将事务提交分为`Try - Confirm - Cancel`3个操作

```vim
Try：预留业务资源、数据校验
Confirm：确认执行业务操作
Cancel：取消执行业务操作
```

TCC事务处理流程和2PC二阶段提交类型，不过2PC通常都是在跨库DB层面，而TCC本质就是一个应用层面的2PC.

![](/asassets/img/TCC原理图.png)

TCC优缺点
- 优点
  > 让应用自己定义数据库操作的粒度，使得降低锁冲突、提高吞吐量成为可能。

- 缺点
  > 1) 对应用的侵入性强。业务逻辑的每个分支都需要实现Try、Confirm、Cancel三个操作  
  > 2) 实现难度大，需要按照网络状态、系统故障等不同的失败原理实现不同的回滚策略，为满足一致性的要求，Confirm和Cancel必须实现幂等

##### TCC应用场景

[TCC-Transaction](https://github.com/changmingxie/tcc-transaction)
[TCC-Transaction分布式事务 —— 项目实战](http://www.pianshen.com/article/316062375/)

![](/asassets/img/TCC应用场景.png)
