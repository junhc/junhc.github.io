---
layout: post
title: "使用xhtmlrenderer将html转成图片"
date: 2018-11-20 16:44:35
description: "使用xhtmlrenderer将html转成图片"
categories:
- bookmark
permalink: html2image
---

###### 1、pom.xml新增xhtmlrenderer依赖
```vim
<dependency>
  <groupId>org.xhtmlrenderer</groupId>
  <artifactId>core-renderer</artifactId>
  <version>R8</version>
</dependency>
```
###### 2、HTML标准头
```vim
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">  
<head lang="en">  
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
</head>  
<body>
  ...
</body>
</html>
```

###### 3、核心代码
```vim
int width = 600, height = 800;
File template = new File("xxx/template.xhtml");
Java2DRenderer renderer = new Java2DRenderer(template, width, height);
BufferedImage image = renderer.getImage(); 
FSImageWriter imageWriter = new FSImageWriter();  
imageWriter.write(img, "xxx/xxx.png");
```

###### 4、Linux服务器缺乏中文字库，导致中文乱码
```vim
// 4.1 查看系统字体..
fc-list
// fc-list:command not found...
// 说明没有安装字体库..

// 4.2 安装字体库..
yum -y install fontconfig

// 4.3 将字体.ttf文件拷贝到/usr/share/fonts/文件夹下

// 4.5 重启服务器
```
